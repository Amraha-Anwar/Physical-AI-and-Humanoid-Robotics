C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
INFO:     Started server process [10936]
INFO:     Waiting for application startup.
INFO:backend.main:FastAPI application startup event triggered.
INFO:backend.dependencies:Initializing database clients and services...
INFO:backend.neon_client:Successfully connected to Neon Postgres for DDL operations.
INFO:backend.neon_client:Ensured 'rag_metadata' table exists in Neon Postgres.
INFO:backend.neon_client:Ensured 'chat_history' table and index exist in Neon Postgres.
INFO:backend.dependencies:Neon Postgres DDL ensured.
INFO:httpx:HTTP Request: GET https://ac10927f-6c87-4007-8ec8-067161de603d.us-east4-0.gcp.cloud.qdrant.io "HTTP/1.1 200 OK"
INFO:backend.qdrant_service:Collection 'book_vectors' not found. Creating new collection.
INFO:backend.qdrant_service:Collection 'book_vectors' created successfully with vector_size=1536.
INFO:backend.dependencies:Qdrant client initialized.
INFO:backend.ingestion.embeddings_client:EmbeddingClient initialized with Groq model: text-embedding-ada-002
WARNING:backend.ingestion.embeddings_client:CRITICAL: Embedding model switched to Groq. You MUST re-ingest all documents for RAG to work correctly. Retrieval using old Gemini vectors will fail or produce garbage.
INFO:backend.dependencies:EmbeddingClient initialized.
INFO:backend.dependencies:ContentProcessor initialized.
INFO:backend.dependencies:IngestionService initialized.
INFO:backend.dependencies:HistoryService initialized.
INFO:backend.dependencies:QueryService initialized.
INFO:backend.dependencies:EvaluationService initialized.
INFO:backend.main:Database clients setup complete.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:backend.api.ingestion:Received ingestion request for document_id: example-book-123
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/embeddings "HTTP/1.1 404 Not Found"
ERROR:backend.ingestion.embeddings_client:Failed to generate embedding via Groq: Error code: 404 - {'error': {'message': 'The model `text-embedding-ada-002` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'code': 'model_not_found'}}
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/embeddings "HTTP/1.1 404 Not Found"
ERROR:backend.ingestion.embeddings_client:Failed to generate embedding via Groq: Error code: 404 - {'error': {'message': 'The model `text-embedding-ada-002` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'code': 'model_not_found'}}
INFO:httpx:HTTP Request: POST https://api.groq.com/openai/v1/embeddings "HTTP/1.1 404 Not Found"
ERROR:backend.ingestion.embeddings_client:Failed to generate embedding via Groq: Error code: 404 - {'error': {'message': 'The model `text-embedding-ada-002` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'code': 'model_not_found'}}
INFO:backend.ingestion.ingestion_service:ContentProcessor generated 3 chunks.
INFO:backend.ingestion.ingestion_service:Successfully generated embeddings for 3 chunks.
INFO:backend.ingestion.ingestion_service:Saved 3 chunks to Neon Postgres.
ERROR:backend.ingestion.ingestion_service:Failed to save chunks to Qdrant: <AioRpcError of RPC that terminated with:
	status = StatusCode.INVALID_ARGUMENT
	details = "Wrong input: Vector dimension error: expected dim: 1536, got 0"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:3, grpc_message:"Wrong input: Vector dimension error: expected dim: 1536, got 0"}"
>
Traceback (most recent call last):
  File "D:\Physical-AI-Humanoid-robotics\backend\ingestion\ingestion_service.py", line 99, in _save_to_qdrant
    operation_info = await self.qdrant_client.upsert(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\async_qdrant_client.py", line 902, in upsert
    return await self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\async_qdrant_remote.py", line 970, in upsert
    await self.grpc_points.Upsert(
    ...<9 lines>...
    )
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_interceptor.py", line 471, in __await__
    call = yield from self._interceptors_task.__await__()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_interceptor.py", line 701, in _invoke
    return await _run_interceptor(
           ^^^^^^^^^^^^^^^^^^^^^^^
        list(interceptors), client_call_details, request
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_interceptor.py", line 675, in _run_interceptor
    call_or_response = await interceptors[0].intercept_unary_unary(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        continuation, client_call_details, request
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\connection.py", line 76, in intercept_unary_unary
    return await postprocess(response) if postprocess else response
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\connection.py", line 192, in process_response
    return await call
           ^^^^^^^^^^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_call.py", line 327, in __await__
    raise _create_rpc_error(
    ...<2 lines>...
    )
grpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:
	status = StatusCode.INVALID_ARGUMENT
	details = "Wrong input: Vector dimension error: expected dim: 1536, got 0"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:3, grpc_message:"Wrong input: Vector dimension error: expected dim: 1536, got 0"}"
>
ERROR:backend.api.ingestion:Error during content ingestion for document_id example-book-123: <AioRpcError of RPC that terminated with:
	status = StatusCode.INVALID_ARGUMENT
	details = "Wrong input: Vector dimension error: expected dim: 1536, got 0"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:3, grpc_message:"Wrong input: Vector dimension error: expected dim: 1536, got 0"}"
>
Traceback (most recent call last):
  File "D:\Physical-AI-Humanoid-robotics\backend\api\ingestion.py", line 27, in ingest_content_endpoint
    processed_chunks = await ingestion_service.ingest_content_async(raw_content, neon_conn) # Pass neon_conn
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Physical-AI-Humanoid-robotics\backend\ingestion\ingestion_service.py", line 52, in ingest_content_async
    await self._save_to_qdrant(embeddable_chunks)
  File "D:\Physical-AI-Humanoid-robotics\backend\ingestion\ingestion_service.py", line 99, in _save_to_qdrant
    operation_info = await self.qdrant_client.upsert(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\async_qdrant_client.py", line 902, in upsert
    return await self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\async_qdrant_remote.py", line 970, in upsert
    await self.grpc_points.Upsert(
    ...<9 lines>...
    )
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_interceptor.py", line 471, in __await__
    call = yield from self._interceptors_task.__await__()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_interceptor.py", line 701, in _invoke
    return await _run_interceptor(
           ^^^^^^^^^^^^^^^^^^^^^^^
        list(interceptors), client_call_details, request
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_interceptor.py", line 675, in _run_interceptor
    call_or_response = await interceptors[0].intercept_unary_unary(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        continuation, client_call_details, request
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\connection.py", line 76, in intercept_unary_unary
    return await postprocess(response) if postprocess else response
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\qdrant_client\connection.py", line 192, in process_response
    return await call
           ^^^^^^^^^^
  File "C:\Users\pc\AppData\Local\Programs\Python\Python313\Lib\site-packages\grpc\aio\_call.py", line 327, in __await__
    raise _create_rpc_error(
    ...<2 lines>...
    )
grpc.aio._call.AioRpcError: <AioRpcError of RPC that terminated with:
	status = StatusCode.INVALID_ARGUMENT
	details = "Wrong input: Vector dimension error: expected dim: 1536, got 0"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:3, grpc_message:"Wrong input: Vector dimension error: expected dim: 1536, got 0"}"
>
