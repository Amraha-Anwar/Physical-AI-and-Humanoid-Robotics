"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[80],{2936:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var t=n(8168),o=(n(6540),n(5680));const i={sidebar_position:3,title:"Nav2 for Humanoids (Conceptual Balance)"},r="Nav2 for Humanoids (Conceptual Balance)",l={unversionedId:"module3/nav2-humanoids",id:"module3/nav2-humanoids",title:"Nav2 for Humanoids (Conceptual Balance)",description:"Learning Objectives",source:"@site/docs/module3/03-nav2-humanoids.mdx",sourceDirName:"module3",slug:"/module3/nav2-humanoids",permalink:"/docs/module3/nav2-humanoids",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module3/03-nav2-humanoids.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Nav2 for Humanoids (Conceptual Balance)"},sidebar:"tutorialSidebar",previous:{title:"VSLAM and Perception with Isaac ROS",permalink:"/docs/module3/vslam-perception"},next:{title:"Conversational Robotics",permalink:"/docs/module4/conversational-robotics"}},s={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to Nav2",id:"introduction-to-nav2",level:2},{value:"Key Components of Nav2:",id:"key-components-of-nav2",level:3},{value:"Challenges of Nav2 for Bipedal Locomotion",id:"challenges-of-nav2-for-bipedal-locomotion",level:2},{value:"1. Adapting Nav2: Conceptual Approaches",id:"1-adapting-nav2-conceptual-approaches",level:2},{value:"Footstep Planning vs. Differential Drive",id:"footstep-planning-vs-differential-drive",level:3},{value:"Integration of VSLAM Output",id:"integration-of-vslam-output",level:3},{value:"Conclusion",id:"conclusion",level:2}],p={toc:c},g="wrapper";function d({components:e,...a}){return(0,o.yg)(g,(0,t.A)({},p,a,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"nav2-for-humanoids-conceptual-balance"},"Nav2 for Humanoids (Conceptual Balance)"),(0,o.yg)("h2",{id:"learning-objectives"},"Learning Objectives"),(0,o.yg)("p",null,"Upon completing this chapter, you will be able to:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Understand the core components and principles of the ROS 2 Navigation Stack (Nav2)."),(0,o.yg)("li",{parentName:"ul"},"Identify the challenges and conceptual approaches for adapting Nav2 to bipedal (humanoid) locomotion."),(0,o.yg)("li",{parentName:"ul"},"Grasp the differences between differential drive and footstep planning for humanoid navigation."),(0,o.yg)("li",{parentName:"ul"},"Understand how VSLAM output integrates into the Nav2 framework for localization and mapping.")),(0,o.yg)("h2",{id:"introduction-to-nav2"},"Introduction to Nav2"),(0,o.yg)("p",null,"The ",(0,o.yg)("strong",{parentName:"p"},"ROS 2 Navigation Stack (Nav2)")," is a powerful and flexible framework for enabling robots to autonomously navigate from a starting pose to a goal pose while avoiding obstacles. Nav2 is a complete rewrite of the original ROS 1 Navigation Stack, designed to be more modular, performant, and reliable, leveraging ROS 2's capabilities."),(0,o.yg)("h3",{id:"key-components-of-nav2"},"Key Components of Nav2:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"State Estimator (e.g., ",(0,o.yg)("inlineCode",{parentName:"strong"},"robot_localization"),")"),": Fuses sensor data (odometry, IMU, LiDAR, VSLAM) to provide an accurate estimate of the robot's pose."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Map Server"),": Manages the robot's environment map (typically an occupancy grid)."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Planner (Global & Local)"),":",(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Global Planner"),": Computes a collision-free path from the start to the goal on the map."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Local Planner"),": Takes the global path and performs real-time obstacle avoidance, generating velocity commands for the robot."))),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Controller"),": Executes the velocity commands and ensures the robot follows the path."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Behavior Tree"),": Orchestrates the entire navigation process, allowing for complex decision-making and recovery behaviors.")),(0,o.yg)("h2",{id:"challenges-of-nav2-for-bipedal-locomotion"},"Challenges of Nav2 for Bipedal Locomotion"),(0,o.yg)("p",null,"Nav2 is primarily designed for wheeled or tracked robots that can achieve omnidirectional or differential drive motion. Humanoid robots, with their bipedal locomotion, introduce unique challenges:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Balance and Stability"),": The most significant challenge. Humanoids must constantly maintain balance, which affects every aspect of motion generation."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Footstep Planning"),": Instead of continuous velocity commands, humanoids move by taking discrete footsteps. This requires a different approach to path planning."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Kinematic Constraints"),": Humanoid leg kinematics are far more complex than simple wheeled bases."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Dynamic Obstacle Avoidance"),": Avoiding obstacles requires considering the robot's center of mass, swing leg trajectory, and potential for falling."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Terrain Negotiation"),": Uneven terrain, stairs, or deformable surfaces pose greater challenges for bipedal robots.")),(0,o.yg)("h2",{id:"1-adapting-nav2-conceptual-approaches"},"1. Adapting Nav2: Conceptual Approaches"),(0,o.yg)("p",null,"Given these challenges, direct application of standard Nav2 local planners (like DWA or TEB, which output linear and angular velocities) is not directly suitable for humanoids. Instead, a more tailored approach is needed."),(0,o.yg)("h3",{id:"footstep-planning-vs-differential-drive"},"Footstep Planning vs. Differential Drive"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Differential Drive (Wheeled Robots)"),": The robot moves by controlling the angular velocities of its wheels, resulting in continuous linear and angular motion. Nav2's default planners generate velocity commands for this model."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Footstep Planning (Bipedal Humanoids)"),": The robot moves by sequentially placing its feet to maintain balance and achieve a desired displacement. This is a discrete planning problem.")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Conceptual Adaptation for Humanoids:")),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"High-Level Planning (Global Planner)"),": Nav2's global planners can still be used to find a high-level, collision-free path on the occupancy grid map. This path would represent the desired trajectory for the robot's base."),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Footstep Planner (Custom Local Planner)"),": This is the critical replacement for standard local planners. Instead of generating velocities, a custom footstep planner would:",(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},"Take the global path and the robot's current pose."),(0,o.yg)("li",{parentName:"ul"},"Generate a sequence of discrete foot placements (footsteps) that lead towards the goal."),(0,o.yg)("li",{parentName:"ul"},"Ensure each footstep maintains the robot's balance (e.g., Zero Moment Point (ZMP) constraint, Center of Pressure (CoP) stability)."),(0,o.yg)("li",{parentName:"ul"},"Consider kinematic reachability and collision avoidance for the swing leg."),(0,o.yg)("li",{parentName:"ul"},"This planner would likely interact with a ",(0,o.yg)("strong",{parentName:"li"},"Whole-Body Controller")," or ",(0,o.yg)("strong",{parentName:"li"},"Balance Controller")," to execute the footstep sequence."))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Local Costmaps with Balance Constraints"),": The local costmap, which represents dynamic obstacles, would need to be enhanced. For humanoids, it could include areas that are unstable for foot placement or require specific gait adjustments.")),(0,o.yg)("h3",{id:"integration-of-vslam-output"},"Integration of VSLAM Output"),(0,o.yg)("p",null,"VSLAM plays a fundamental role in providing the accurate state estimation required by Nav2."),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Odometry Input"),": The pose estimates from VSLAM (e.g., from Isaac ROS ",(0,o.yg)("inlineCode",{parentName:"li"},"visual_slam"),") can be fed into Nav2's state estimator (e.g., ",(0,o.yg)("inlineCode",{parentName:"li"},"robot_localization"),"'s Extended Kalman Filter or Unscented Kalman Filter). VSLAM provides highly accurate pose information over short and long distances compared to wheel odometry alone."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Mapping"),": The map generated by VSLAM (point clouds or occupancy grids) can be used to update Nav2's global costmap. For humanoids, a 3D point cloud map from VSLAM is particularly useful for identifying obstacles and traversable areas on uneven terrain, which 2D occupancy grids might miss."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Loop Closure"),': VSLAM\'s ability to detect and correct for "loops" (returning to a previously visited location) improves map consistency and global localization accuracy over long trajectories.')),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Conceptual Workflow with VSLAM and Nav2 for Humanoids:")),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"VSLAM Node (Isaac ROS)"),": Processes depth camera (and IMU) data, outputs robot pose (odometry) and sparse map points."),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},(0,o.yg)("inlineCode",{parentName:"strong"},"robot_localization")),": Fuses VSLAM odometry with IMU data (and potentially joint encoders) to produce a highly accurate, smooth pose estimate. This output (",(0,o.yg)("inlineCode",{parentName:"li"},"odom")," or ",(0,o.yg)("inlineCode",{parentName:"li"},"map")," frame) is critical for Nav2."),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Local Costmap Generation"),": Uses sensor data (LiDAR, depth camera point clouds) and robot's current pose to create a local obstacle map. This might involve custom layers to account for humanoid-specific constraints."),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Global Planner"),": Computes a high-level path to the goal using the global map."),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Humanoid-Specific Local Planner (Footstep Planner)"),": Takes the global path and current state, generates a sequence of stable foot placements."),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Whole-Body Controller"),": Receives footstep plans and executes them, maintaining balance and coordinating joint movements.")),(0,o.yg)("h2",{id:"conclusion"},"Conclusion"),(0,o.yg)("p",null,"Adapting Nav2 for humanoid robots requires a significant shift from traditional wheeled robot navigation, primarily by incorporating sophisticated balance control and footstep planning. However, the modular architecture of Nav2, combined with powerful perception capabilities from VSLAM (especially when accelerated by Isaac ROS), provides a strong foundation. The challenge lies in developing the custom bipedal planners and controllers that can leverage Nav2's global planning and mapping capabilities while ensuring stable and agile locomotion for humanoids."),(0,o.yg)("hr",null),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Next Steps"),': Having built the "eyes" and "brain" for perception and navigation, the final modules will integrate advanced cognitive capabilities, including Large Language Models for conversational robotics and high-level planning, culminating in a capstone synthesis and sim-to-real transfer.'))}d.isMDXComponent=!0},5680:(e,a,n)=>{n.d(a,{xA:()=>p,yg:()=>m});var t=n(6540);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach(function(a){o(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function l(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=t.createContext({}),c=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},p=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},g="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef(function(e,a){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),g=c(n),u=o,m=g["".concat(s,".").concat(u)]||g[u]||d[u]||i;return n?t.createElement(m,r(r({ref:a},p),{},{components:n})):t.createElement(m,r({ref:a},p))});function m(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[g]="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);